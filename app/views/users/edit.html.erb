<% content_for :title, 'Edit user' %>
<h1>Update your profile</h1>

<div class='row'>
  <div class='col-xs-8 col-xs-offset-2 col-sm-8 col-sm-offset-2 col-md-4 col-md-offset-4 col-lg-4 col-lg-offset-4'>
    <%= form_for(@user) do |f| %>
      <%= form_errors_for @user %>

      <%= f.label :name %>
      <%= f.text_field :name, class: 'form-control' %>

      <%= f.label :email %>
      <%= f.email_field :email, class: 'form-control'%>

      <%= f.label :password %>
      <%= f.password_field :password, class: 'form-control'%>

      <%= f.label :password_confirmation %>
      <%= f.password_field :password_confirmation, class: 'form-control'%>

      <div class='profile_image'>
        <span><%= image_tag @user.picture.url %></span>
        <p>
          <%= f.label :profile_image, 'Profile Image' %>
          <%= f.file_field :picture, accept: 'image/jpeg,image/gif,image/png' %>
        </p>
      </div>
      <%= f.submit 'Save changes', class: 'btn btn-primary' %>
    <% end %>
  </div>
</div>

<script type="text/javascript">
  $('#user_picture').bind('change', function() {
    var size_ing_megabyte = this.file[0].size/1024/1024;
    if (size_in_megabytes > 5){
      alert('Maximum file size is 5MB. Please choose a smaller file.');
    }
  })
</script>